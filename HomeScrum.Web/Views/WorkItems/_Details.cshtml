@model HomeScrum.Web.Models.WorkItems.WorkItemViewModel

@Html.Partial( "_DomainObjectBaseDetails", Model )

<fieldset>
    <legend>WorkItemViewModel</legend>

    <div class="displayLabel" id="StatusLabel">
        @Html.DisplayNameFor( model => model.StatusName )
    </div>
    <div class="displayField" id="Status">
        @Html.DisplayFor( model => model.StatusName )
    </div>

    <div class="displayLabel" id="ProjectLabel">
        @Html.DisplayNameFor( model => model.ProjectName )
    </div>
    <div class="displayField" id="Project">
        @Html.DisplayFor( model => model.ProjectName )
    </div>

    <div class="displayLabel" id="CreatedByUserNameLabel">
        @Html.DisplayNameFor( model => model.CreatedByUserName )
    </div>
    <div class="displayField" id="CreatedByUserName">
        @Html.DisplayFor( model => model.CreatedByUserName )
    </div>

    @if (Model.AssignedToUserName != null)
    {
        <div class="displayLabel" id="AssinedToUserNameLabel">
            @Html.DisplayNameFor( model => model.AssignedToUserName )
        </div>
        <div class="displayField" id="AssigneToUserName">
            @Html.DisplayFor( model => model.AssignedToUserName )
        </div>
    }
</fieldset>

@if (Model.Tasks.Count() > 0)
{
    <div id="TaskListDiv">
        <h3>Tasks</h3>
        <table>
            <tr>
                <th>
                    @Html.DisplayNameFor( model => model.WorkItemTypeName )
                </th>
                <th>
                    @Html.DisplayNameFor( model => model.Name )
                </th>
                <th>
                    @Html.DisplayNameFor( model => model.StatusName )
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model.Tasks)
            {
                var rowClass = item.IsComplete ? "CompletedItemRow" : "NotCompletedItemRow";
        
                <tr id="@Html.AttributeEncode( item.Id.ToString() )" class="@rowClass">
                    <td>
                        @Html.DisplayFor( modelItem => item.WorkItemTypeName )
                    </td>
                    <td>
                        @Html.DisplayFor( modelItem => item.Name )
                    </td>
                    <td>
                        @Html.DisplayFor( modelItem => item.StatusName )
                    </td>
                    <td>
                        @Html.ActionLink( "Edit", "Edit", new { id = item.Id, callingAction = "Details", callingId = Model.Id.ToString() } ) |
                        @Html.ActionLink( "Details", "Details", new { id = item.Id, callingAction = "Details", callingId = Model.Id.ToString() } )
                    </td>
                </tr>
            }
        </table>
    </div>
}
